<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Product AR</title>
  <style>
    html,body { height:100%; margin:0; font-family:system-ui, Arial; }
    .wrap { display:flex; align-items:center; justify-content:center; height:100%; text-align:center; padding:24px; }
    .hint { max-width:520px; color:#222 }
    .small { color:#666; font-size:14px; margin-top:12px }
    a.button {
      display:inline-block; padding:12px 18px; border-radius:10px;
      background:#111; color:#fff; text-decoration:none; margin-top:16px
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="hint">
    <h1>Launching AR…</h1>
    <p>If it doesn’t open automatically, tap the button below.</p>
    <div id="fallback"></div>
    <p class="small">Tip: This needs a modern mobile browser. On desktop you’ll just see this page.</p>
  </div>
</div>

<script>
  // 1) Set your hosted file URLs
  const glbUrl  = new URL('hitem3d.glb', window.location.href).toString(); // same-folder GLB

  const usdzUrl = new URL('product.usdz', window.location.href).toString(); // will add later

  // 2) Build platform-specific AR links
  // Android Scene Viewer (GLB)
  const sceneViewer = `https://arvr.google.com/scene-viewer/1.0?file=${encodeURIComponent(glbUrl)}&mode=ar_only&title=${encodeURIComponent('Your Product')}`;

  // iOS Quick Look (USDZ) — will work once we add product.usdz
  const quickLook = usdzUrl; // iOS just needs a direct .usdz link, can add #allowsContentScaling=1 if needed

  // 3) Simple UA detect
  const ua = navigator.userAgent.toLowerCase();
  const isAndroid = ua.includes('android');
  const isIOS = /iphone|ipad|ipod/.test(ua);

  function openAR() {
    if (isAndroid) {
      window.location.href = sceneViewer;
    } else if (isIOS) {
      // Quick Look requires a user gesture in some cases; try auto then show a tap button
      window.location.href = quickLook;
      setTimeout(() => showButton(quickLook, 'Open in AR (iOS)'), 800);
    } else {
      showButton(sceneViewer, 'Open in AR (Android)'); // desktop fallback
    }
  }

  function showButton(href, label) {
    const btn = document.createElement('a');
    btn.className = 'button';
    btn.href = href;
    btn.textContent = label;
    document.getElementById('fallback').appendChild(btn);
  }

  // Try to auto-launch on load
  window.addEventListener('load', openAR);
</script>
</body>
</html>
